{% extends "base.html" %}

{% block statics %}

<link rel="stylesheet" href="{{STATIC_URL}}css/jquery.dynatable.css">
<!-- JqWidgets styles -->
<link rel="stylesheet" href="{{STATIC_URL}}js/jqwidgets/styles/jqx.base.css">
<link rel="stylesheet" href="{{STATIC_URL}}js/jqwidgets/styles/jqx.bootstrap.css">

<script src='{{STATIC_URL}}js/vendor/jquery/jquery.js'></script>
<!-- AmCharts -->
<script src="{{STATIC_URL}}js/amcharts/amcharts.js" type="text/javascript"></script>
<script src="{{STATIC_URL}}js/amcharts/gauge.js" type="text/javascript"></script>
<script src="{{STATIC_URL}}js/amcharts/serial.js" type="text/javascript"></script>
<script src="{{STATIC_URL}}js/amcharts/themes/patterns.js" type="text/javascript"></script>
<!-- hight Charts -->
<script src="{{STATIC_URL}}js/high_charts/highcharts.js"></script>
<script src="{{STATIC_URL}}js/high_charts/modules/exporting.js"></script>
<script src="{{STATIC_URL}}js/high_charts/highcharts-more.js"></script>
<script src="{{STATIC_URL}}js/high_charts/modules/solid-gauge.src.js"></script>

<!-- Jqwidget -->
<script src="{{STATIC_URL}}js/jqwidgets/jqxcore.js" type="text/javascript"></script>
<script src="{{STATIC_URL}}js/jqwidgets/jqxtabs.js" type="text/javascript"></script>

<!-- GRID -->
<script src="{{STATIC_URL}}js/jqwidgets/jqxgrid.js" type="text/javascript"></script>
<script src="{{STATIC_URL}}js/jqwidgets/jqxgrid.sort.js" type="text/javascript"></script>
<script src="{{STATIC_URL}}js/jqwidgets/jqxgrid.pager.js" type="text/javascript"></script>
<script src="{{STATIC_URL}}js/jqwidgets/jqxgrid.selection.js" type="text/javascript"></script>
<script src="{{STATIC_URL}}js/jqwidgets/jqxscrollbar.js" type="text/javascript"></script>
<script src="{{STATIC_URL}}js/jqwidgets/jqxbuttons.js" type="text/javascript"></script>
<script src="{{STATIC_URL}}js/jqwidgets/jqxgrid.columnsresize.js" type="text/javascript"></script>
<script src="{{STATIC_URL}}js/jqwidgets/jqxscrollbar.js" type="text/javascript"></script>
<script src="{{STATIC_URL}}js/jqwidgets/jqxdropdownlist.js" type="text/javascript"></script>
<script src="{{STATIC_URL}}js/jqwidgets/jqxmenu.js" type="text/javascript"></script>
<script src="{{STATIC_URL}}js/jqwidgets/jqxgrid.filter.js" type="text/javascript"></script>
<script src="{{STATIC_URL}}js/jqwidgets/jqxlistbox.js" type="text/javascript"></script> 

<script src="{{STATIC_URL}}js/jqwidgets/jqxdata.js" type="text/javascript"></script>

<script src="{{STATIC_URL}}js/libs/gestion_detail.js" type="text/javascript"></script>
<script src="{{STATIC_URL}}js/libs/gestion_charts.js" type="text/javascript"></script>



<script src='{{STATIC_URL}}js/vendor/jquery.dynatable.js'></script>
	<script>

			
  	</script>

{% endblock statics %}

{% block main_content %}	

{% if memory %}
<!-- Gauges Mem, Proc -->
<div class="row">
	<div class="column medium-4 text-center" >
		<div id="chartdiv" style="width:100%; height:300px;"></div>	
		<label>Memoria usada: <span id="uram">{{memory.used_ram}}</span> de {{memory.ram}}	</label>
	</div>
	<div class="column medium-4 text-center" >
		<div id="swap" style="width:100%; height:300px;"></div>	
		<label>Swap usada: <span id="uswap"> {{uswap}} </span> de {{memory.swap}}	</label>
	</div>
	<div class="column medium-4 text-center" >
		<div id="load_avg" style="width:100%; height:300px;"></div>	
		<label>Carga promedio: <span id="lavg">{{load.load_1}} </span> de 100%</label>
	</div>
</div>

{% endif %}



<div id="tabs">
	<ul>
	    <li style='font-size: 12px; font-weight: bold'> <i class='fi-list'></i> Detalles</li>
	    <li style='font-size: 12px;font-weight: bold'> <i class='fi-list'></i> Discos</li>
	    <li style='font-size: 12px;font-weight: bold'><i class='fi-list'></i> Procesos</li>
	    <li style='font-size: 12px;font-weight: bold'><i class='fi-list'></i> Storages</li>
	    <li style='font-size: 12px;font-weight: bold'><i class='fi-list'></i> Devices</li>
	    <li style='font-size: 12px;font-weight: bold'><i class='fi-list'></i> Software</li>
	    <li style='font-size: 12px;font-weight: bold'><i class='fi-list'></i> Hist. de Memoria</li>
	    <li style='font-size: 12px;font-weight: bold'><i class='fi-list'></i> Hist. de Procesador</li>
	    <li style='font-size: 12px;font-weight: bold'><i class='fi-list'></i> Hist. de Disco</li>

	    <!-- <li style='font-size: 12px;font-weight: bold'>Interfaces</li> -->
	</ul>
	<div id="tabs-1">
		<br>
		<div class="Panel" style='width: 95%;padding-left: 15px'>
			<div class="cabecera celeste">&nbsp;&nbsp; {{host.hostname}} - <i id='ip'>{{host.ip}}</i> </div>
			<div class="contenido">
				<div class="row">
					<div class="column medium-2 text-right"><label><strong>Contacto:</strong></label></div>
					<div class="column medium-5 end"><label class='arsenal'>{{host.contact}}</label></div>
				</div>
				<div class="row">
					<div class="column medium-2 text-right"><label><strong>Ubicacion:</strong></label></div>
					<div class="column medium-5 end"><label class='arsenal'>{{host.location}}</label></div>
				</div>
				<div class="row">
					<div class="column medium-2 text-right"><label><strong>Descripcion:</strong></label></div>
					<div class="column medium-6 end"><label class='arsenal'>{{host.description}}</label></div>
				</div>
				<div class="row">
					<div class="column medium-2 text-right"><label><strong>Uptime:</strong></label></div>
					<div class="column medium-5 end"><label class='arsenal'>{{host.uptime}}</label></div>
				</div>
				<div class="row">
					<div class="column medium-2 text-right"><label><strong>Servicios:</strong></label></div>
					<div class="column medium-5 end"><label class='arsenal'>{{host.services}}</label></div>
				</div>
				<div class="row">
					<div class="column medium-2 text-right"><label><strong>Procesos:</strong></label></div>
					<div class="column medium-5 end"><label class='arsenal'>{{host.processes}}</label></div>
				</div>
				<div class="row">
					<div class="column medium-2 text-right"><label><strong>Usuarios:</strong></label></div>
					<div class="column medium-5 end"><label class='arsenal'>{{host.users}}</label></div>
				</div>
				<div class="row">
					<div class="column medium-2 text-right"><label><strong>Ult. Actualizacion:</strong></label></div>
					<div class="column medium-5 end"><label class='arsenal'><i class='fi-clock'></i> Hace {{host.last_update|timesince}}</label></div>
				</div>

			</div>
		</div>
	</div>
	<div id="tabs-2">
		<table id='mitabla' class="table table-bordered">
			<caption class='caption'></caption>
			<thead>
			    <tr class='basic'>
				    <th width="100px">Ruta</th>
				    <th width="120px">Dispositivo</th>		      
				    <th width="100px">Tamaño Gb</th>	
				    <th width="90px">Uso %</th>
				    <th width="80px">Disp. Gb</th>
				    <th width="80px">% Min</th>
				    <th width="70px">Estado</th>
				    <th width="170px">Msg. Adv.</th>
				    <th width="120px">Actualizado</th>
				    
			    </tr>
			  </thead>
			<tbody> 
				{% for disk in disks %} 
					<tr>
						<td>{{disk.disk_path}}</td>
						<td>{{disk.device}}</td>
						<td>{{disk.total}}</td>
						<td>
							<label>{{disk.percent}}%</label>
							<div class="progress" style='border:1px solid #551177;'>
							  <span class="meter" style="width:{{disk.percent}}%"></span>
							</div>							
						</td>
						<td>{{disk.free}}</td>
						<td>{{disk.minimun}}</td>
						<td>
							{% if disk.error_flag == 0 %}
						 		<img src="{{STATIC_URL}}img/ok.png" alt="" style='width: 30px'> 
							{% else %}
								<img src="{{STATIC_URL}}img/warning.png" alt="" style='width: 30px'> 
							{% endif %} 
						</td>
						<td>{{disk.error_msg|default:"Ninguno"}}</td>
						<td> <i class='fi-clock'></i> {{disk.last_update|timesince}}</td>
					</tr>
				{% empty %}
					<tr>
						<td  colspan="9">
							<div class="row">
							<div class="column medium-4">
								No se pudo obtener registros para este host, posiblemente no este configurado en su agente snmp o no lo soporte.
							</h4>
							</div>
							<div class="column medium-3 end">
								<img src="{{STATIC_URL}}img/female.png" style='width:200px'>
							</div>
						</div>
						</td>
					</tr>
				{% endfor %}
			</tbody>
		</table>

	</div>
	<div id="tabs-3" >
		<div id='jqxWidget' style="text-align: center">
			<label><strong>Listado de Procesos Monitorizados</strong></label>
		</div>
		<div id='procs' style=''></div>
	</div>
	<!-- tab 4 -->
	<div id="tabs-4">
		<table id='mitabla' class="table table-bordered">
			<caption class='caption'></caption>
			<thead>
			    <tr class='basic'>
				    <th width="150px">Nombre</th>
				    <th width="130px">Tamaño MB</th>		      
				    <th width="130px">Ocupado MB</th>
				    <th width="130px">Ocupado %</th>	
			    </tr>
			  </thead>
			<tbody> 
				{% for storage in storages %} 
					<tr>
						<td>{{storage.desc}}</td>
						<td>{{storage.size}}</td>
						<td>{{storage.used}}</td>
						<td>
							<label>{{storage.percent_used}}%</label>
							<div class="progress" style='border:1px solid #551177;'>
							  <span class="meter" style="width:{{storage.percent_used}}%"></span>
							</div>							
						</td>
					</tr>
					{% empty %}
					<tr>
						<td  colspan="7">
							<div class="row">
							<div class="column medium-4">
								Aparentemente no se ah registrado ningun proceso para monitorizar, configure su agente SNMP
							</h4>
							</div>
							<div class="column medium-3 end">
								<img src="{{STATIC_URL}}img/female.png" style='width:200px'>
							</div>
						</div>
						</td>
					</tr>
				{% endfor %}
			</tbody>
		</table>
	</div>
	<!-- end tab 4 -->
	<!-- tab 5 devices-->
	<div id="tabs-5">
	
		<div id='jqxWidget' style="font-size: 13px; font-family: Verdana; float: left; text-align: center">
			<label><strong>Listado de dispositivos</strong></label>
	        <div id="devices_grid"></div>
	    </div>
	    <br>
	</div>
	<!-- end tab 5 -->

	<!-- tab 6 -->
	<div id="tabs-6">

		<div id='jqxWidget' style="font-size: 13px; font-family: Verdana; float: left; text-align: center">
			<label><strong>Listado de Software</strong></label>
	        <div id="sw_grid"></div>
	    </div>
	</div>
	<!-- end tab 6 -->
	<div id="tabs-7">
		<!-- Memoria-->
		<div class="row">
			<div class="column medium-12 text-center" >
				<div id="MemHist" style="width:95%; height:400px;">
					<img src="/static/img/loading.gif" alt="Loading..." style='width: 50px'> <label>Cargando...</label>
				</div>
			</div>
		</div>
	</div>
	<!-- tab 8 -->
	<div id="tabs-8">
		<!-- Carga -->
		<br>
		<div class="row" >
			<div class="column medium-12 text-center" style="" >
				<div id="loadHist" style="width:95%; height:400px;">
					<img src="/static/img/loading.gif" alt="Loading..." style='width: 50px'> <label>Cargando...</label>
				</div>
			</div>
		</div>
	</div>
	<!-- end tab 8 -->

	<div id="tabs-9">
		<!-- Disco -->
		<br>
		<!-- Disco -->
		<div class="row">
			<div class="column medium-12 text-center" >
				<div id="diskH" style="width:95%; height:400px;">
					<img src="/static/img/loading.gif" alt="Loading..." style='width: 50px'> <label>Cargando...</label>
				</div>
			</div>
		</div>
	</div>
	<!-- end tab 8 -->
</div>

<div id="container" style="width: 444px; height: 400px; margin: 0 auto"></div>


{% endblock main_content %}